if (self.CavalryLogger) { CavalryLogger.start_js(["ASEzZ6P"]); }

__d("MWChatPhotoRootQuery.graphql",["relay-runtime"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"attachment_id"},{defaultValue:null,kind:"LocalArgument",name:"message_id"}],b=[{kind:"Variable",name:"attachment_id",variableName:"attachment_id"},{kind:"Variable",name:"message_id",variableName:"message_id"}],c={kind:"InlineFragment",selections:[{alias:null,args:[{kind:"Literal",name:"site",value:"www"}],kind:"ScalarField",name:"url",storageKey:'url(site:"www")'}],type:"MessageImage",abstractKey:null},d={kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}],storageKey:null}],type:"MessageAnimatedImage",abstractKey:null};return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"MWChatPhotoRootQuery",selections:[{alias:"currMedia",args:b,concreteType:null,kind:"LinkedField",name:"message_attachment",plural:!1,selections:[c,d],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"MWChatPhotoRootQuery",selections:[{alias:"currMedia",args:b,concreteType:null,kind:"LinkedField",name:"message_attachment",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},c,d,{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],type:"Node",abstractKey:"__isNode"}],storageKey:null}]},params:{id:"2995535170541108",metadata:{},name:"MWChatPhotoRootQuery",operationKind:"query",text:null}}}();a.params.id!=null&&b("relay-runtime").PreloadableQueryRegistry.set(a.params.id,a);e.exports=a}),null);
__d("messengerWebMediaViewerPrefetch",["CometRelay","promiseDone","relay-runtime"],(function(a,b,c,d,e,f){"use strict";e.exports=a;function a(a,c,d){c=b("relay-runtime").createOperationDescriptor(b("relay-runtime").getRequest(a),c);var e=d.check(c)==="available";e||b("promiseDone")(b("CometRelay").fetchQuery(d,a,c.request.variables).toPromise())}}),null);
__d("MWChatPhotoRoot.react",["CometContentNotAvailable.react","CometImage.react","CometMediaViewerLayoutSkeleton.react","CometMediaViewerStage.react","CometPhotoViewerInnerWrapper.react","CometPlaceholder.react","CometRelay","CometRouteParams","CometRouteRenderType","CometTrackingNodeProvider.react","MWChatDeleteMessageEventEmitter","MWChatPhotoRootQuery.graphql","XCometMessengerPhotoControllerRouteBuilder","messengerWebMediaViewerPrefetch","react","unrecoverableViolation","useCometRouterDispatcher","useRoutePassthroughProps"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h,i=h||b("react"),j=g!==void 0?g:g=b("MWChatPhotoRootQuery.graphql");function k(a){var c,d=a.currentPhotoID,e=a.messageID,f=a.messengerPhotoRootQueryReference,g=a.photoIDs;a=b("CometRelay").usePreloadedQuery(j,f);f=b("CometPhotoViewerInnerWrapper.react").useCometPhotoViewerContainerStyles();var h=(a==null?void 0:(c=a.currMedia)==null?void 0:c.url)||(a==null?void 0:(c=a.currMedia)==null?void 0:(a=c.image)==null?void 0:a.uri);c=null;a=null;var k=function(a){return a!=null?b("XCometMessengerPhotoControllerRouteBuilder").buildURL({fbid:a,message_id:e,photo_ids:g}):null};if(Array.isArray(g)&&g.length>0){var l=g.findIndex(function(a){return a===d});l!==-1&&(c=l-1>-1?k(g[l-1]):null,a=l+1<g.length?k(g[l+1]):null)}return h!=null?i.jsx(b("CometMediaViewerLayoutSkeleton.react"),{children:i.jsx(b("CometMediaViewerStage.react"),{nextMediaURI:a,prevMediaURI:c,children:i.jsx("div",{className:f,children:i.jsx(b("CometPhotoViewerInnerWrapper.react").CometPhotoViewerImageWrapper,{imageComponentWithXStyle:function(a){return i.jsx(b("CometImage.react"),{src:h,testid:void 0,xstyle:a},h)}})})})}):i.jsx(b("CometMediaViewerLayoutSkeleton.react"),{children:i.jsx(b("CometMediaViewerStage.react"),{nextMediaURI:a,prevMediaURI:c,children:i.jsx("div",{className:f,children:i.jsx(b("CometContentNotAvailable.react"),{})})})})}function a(a){var c=b("CometRouteParams").useRouteParams(),d=b("useRoutePassthroughProps")(),e=b("useCometRouterDispatcher")(),f=b("CometRouteRenderType").useIsPushView();d=(d==null?void 0:d.origSrc)!=null?String(d==null?void 0:d.origSrc):null;var g=c==null?void 0:c.fbid,h=[];Array.isArray(c.photo_ids)&&(h=c.photo_ids.map(function(a){return String(a)}));var l=c==null?void 0:c.message_id,m=b("CometRelay").useRelayEnvironment();i.useEffect(function(){Array.isArray(c.photo_ids)&&c.photo_ids.forEach(function(a){a!=null&&b("messengerWebMediaViewerPrefetch")(j,{attachment_id:String(a),message_id:String(l)},m)})},[m,c.photo_ids,l]);if(g==null||typeof g!=="string")throw b("unrecoverableViolation")("Invalid fbid parameter","comet_ui");if(l==null||typeof l!=="string")throw b("unrecoverableViolation")("Invalid messageID parameter","messenger_web_product");i.useEffect(function(){var a=b("MWChatDeleteMessageEventEmitter").subscribe(function(a){a===l&&m.commitUpdate(function(a){var b=a.getRoot();if(b==null)return;Array.isArray(c.photo_ids)?c.photo_ids.forEach(function(a){b.setValue(null,"message_attachment",{attachment_id:a,message_id:l})}):b.setValue(null,"message_attachment",{attachment_id:g,message_id:l});e!=null&&f&&e.popPushView()})});return a},[m,f,l,g,c.photo_ids,e]);return i.jsx(b("CometTrackingNodeProvider.react"),{trackingNode:82,children:i.jsx(b("CometPlaceholder.react"),{fallback:i.jsx(b("CometMediaViewerLayoutSkeleton.react"),{children:i.jsx(b("CometMediaViewerStage.react"),{useKeyCommands:!1,children:i.jsx(b("CometPhotoViewerInnerWrapper.react").CometPhotoViewerPlaceholderWrapper,{imageUri:d,showPlaceholderImage:d!=null})})}),children:i.jsx(k,babelHelpers["extends"]({currentPhotoID:g,messageID:l,photoIDs:h},a.queries))})})}}),null);
__d("CometCommonReactionIconResource",["FeedbackReactionTypeNames","ReactionIconLightFilepaths"],(function(a,b,c,d,e,f){"use strict";f.getReaction=a;c={size14:{height:"i4qgphn6",width:"gab7stmx"},size16:{height:"gl3lb2sf",width:"hhz5lgdu"},size18:{height:"hm271qws",width:"ov9facns"}};function a(a,c){a="size"+a;c=b("FeedbackReactionTypeNames")[c].toLowerCase();return b("ReactionIconLightFilepaths").pathsIX[a][c]}d={14:c.size14,16:c.size16,18:c.size18};f.sizes=d}),null);